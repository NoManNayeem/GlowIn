<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}GlowIn{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      :root {
        --gi-bg: radial-gradient(1200px 600px at 100% 0%, #1a0b2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #2d1b69 100%);
        --gi-card-bg: rgba(255,255,255,0.06);
        --gi-card-border: rgba(255,255,255,0.12);
        --gi-accent: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --gi-neon: #e0dae7;
        --gi-neon-glow: 0 0 20px rgba(168, 85, 247, 0.3);
      }
      body {
        background: var(--gi-bg);
        color: #ffffff;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      main.container {
        max-width: 960px;
      }
      .gi-glass {
        background: var(--gi-card-bg);
        border: 1px solid var(--gi-card-border);
        box-shadow: 0 10px 30px rgba(0,0,0,0.4), var(--gi-neon-glow);
        backdrop-filter: blur(6px);
      }
      .gi-apple-btn {
        display: inline-flex; align-items: center; justify-content: center;
        gap: .6rem; font-weight: 600; letter-spacing: .2px;
        background: #000; color: #fff; border: 1px solid #333;
        transition: all 0.2s ease;
      }
      .gi-apple-btn:hover { 
        background: #1a1a1a; color: #fff; border-color: #555;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      }
      .gi-apple-btn:active { transform: translateY(0); }
      .gi-muted { color: #cbd5e1; }
      .gi-accent-text { 
        background: var(--gi-accent);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .gi-hero {
        padding: 3rem 0 1rem 0;
      }
      .code-block { 
        background: #0b0e14; color: #ffffff; border: 1px solid #1f2937;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
      }
      .gi-neon-border {
        border: 1px solid var(--gi-neon);
        box-shadow: var(--gi-neon-glow);
      }
    </style>
</head>
<body>
    {% include 'extra/navbar.html' %}
    <main class="container py-4 flex-grow-1">
        {% block content %}{% endblock %}
    </main>
    {% include 'extra/footer.html' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!-- Live Console Panel (mirrors console.* to on-page UI) -->
    <div id="live-console" class="shadow-lg" style="position:fixed; right:12px; bottom:12px; width:420px; max-height:40vh; overflow:auto; z-index:1080; background:#111; color:#f0f0f0; border-radius:8px; border:1px solid rgba(255,255,255,0.1);">
        <div style="display:flex; align-items:center; gap:.5rem; padding:.5rem .75rem; border-bottom:1px solid rgba(255,255,255,0.1);">
            <strong style="font-size:12px; letter-spacing:.03em;">Live Console</strong>
            <div style="margin-left:auto; display:flex; gap:.5rem;">
                <button type="button" class="btn btn-sm btn-outline-light" data-action="toggle" style="padding:.1rem .4rem; font-size:.7rem;">Minimize</button>
                <button type="button" class="btn btn-sm btn-outline-light" data-action="clear" style="padding:.1rem .4rem; font-size:.7rem;">Clear</button>
            </div>
        </div>
        <div id="live-console-body" style="padding:.5rem .75rem; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, 'Liberation Mono', monospace; font-size:12px;"></div>
    </div>
    <script>
    (function() {
        var container = document.getElementById('live-console');
        var bodyEl = document.getElementById('live-console-body');
        if (!container || !bodyEl) { return; }

        var maxEntries = 300;
        var original = {
            log: console.log.bind(console),
            info: console.info.bind(console),
            warn: console.warn.bind(console),
            error: console.error.bind(console)
        };

        function nowTime() {
            var d = new Date();
            var p = function(n){ return (n < 10 ? '0' : '') + n; };
            return p(d.getHours()) + ':' + p(d.getMinutes()) + ':' + p(d.getSeconds());
        }

        function stringify(arg) {
            try {
                if (typeof arg === 'string') return arg;
                return JSON.stringify(arg, function(k, v) {
                    if (v instanceof Error) { return { message: v.message, stack: v.stack }; }
                    return v;
                }, 2);
            } catch (e) {
                return String(arg);
            }
        }

        function append(level, args) {
            var line = document.createElement('div');
            var color = level === 'error' ? '#ff6b6b' : (level === 'warn' ? '#ffd166' : (level === 'info' ? '#6ec1ff' : '#e0e0e0'));
            line.style.margin = '0 0 .35rem 0';
            line.style.whiteSpace = 'pre-wrap';
            line.style.wordBreak = 'break-word';
            var text = '[' + nowTime() + '] [' + level.toUpperCase() + '] ' + args.map(stringify).join(' ');
            line.textContent = text;
            line.style.color = color;
            bodyEl.appendChild(line);
            while (bodyEl.childNodes.length > maxEntries) {
                bodyEl.removeChild(bodyEl.firstChild);
            }
            bodyEl.scrollTop = bodyEl.scrollHeight;
        }

        ['log','info','warn','error'].forEach(function(level) {
            console[level] = function() {
                try { append(level, Array.prototype.slice.call(arguments)); } catch (e) {}
                try { original[level].apply(console, arguments); } catch (e) {}
            };
        });

        // Capture global errors and unhandled promise rejections
        window.addEventListener('error', function (event) {
            try { append('error', ['Unhandled error', { message: event.message, filename: event.filename, lineno: event.lineno, colno: event.colno, error: event.error }]); } catch (e) {}
        });
        window.addEventListener('unhandledrejection', function (event) {
            try { append('error', ['Unhandled rejection', event.reason]); } catch (e) {}
        });

        var btnClear = container.querySelector('[data-action="clear"]');
        var btnToggle = container.querySelector('[data-action="toggle"]');
        if (btnClear) btnClear.addEventListener('click', function(){ bodyEl.innerHTML=''; });
        if (btnToggle) btnToggle.addEventListener('click', function(){
            var minimized = container.getAttribute('data-minimized') === '1';
            if (!minimized) {
                container.setAttribute('data-minimized', '1');
                bodyEl.style.display = 'none';
                btnToggle.textContent = 'Expand';
                container.style.maxHeight = 'auto';
            } else {
                container.setAttribute('data-minimized', '0');
                bodyEl.style.display = '';
                btnToggle.textContent = 'Minimize';
                container.style.maxHeight = '40vh';
            }
        });

        console.log('Live console activated', { path: window.location.pathname });
    })();
    </script>
</body>
</html>


